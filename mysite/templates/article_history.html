{% extends "base.html" %}

{% block content %}
<div class="container mx-auto py-12 max-w-3xl">
    <div class="bg-white shadow-md rounded-lg p-8">
        <h2 class="text-2xl font-semibold mb-6">Article History</h2>
        <ul class="space-y-4">
            {% for history in history|dictsortreversed:"history_date" %}
            <li class="bg-gray-100 p-4 rounded-lg shadow-md flex items-center justify-between">
                <!-- Version number on the left -->
                <div class="flex-shrink-0 bg-gray-300 rounded-full h-10 w-10 flex items-center justify-center text-xl font-bold">
                    {{ forloop.revcounter }}
                </div>

                <!-- History content in the middle -->
                <div class="ml-4 flex-1">
                    <p><strong>Version {{ forloop.revcounter }} from {{ history.history_date|date:"F j, Y, g:i a" }}</strong></p>
                    <p class="text-sm text-gray-500">Edited by {{ history.history_user|default:"Unknown User" }}</p>
                </div>

                <!-- Action buttons on the right -->
                <div class="flex space-x-4">
                    <a href="{% url 'restore_article' article.id history.history_id %}" class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-600 transition">Restore</a>
                    <a href="{% url 'preview_article' article.id history.history_id %}" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 transition">View</a>                    
                </div>
            </li>
            {% empty %}
            <li>No history available.</li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}
